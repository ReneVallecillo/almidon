Construcción e instalación del instalador UNIX

Antes de proceder con la construcción del instalador UNIX si un dado caso no existe el archivo configure y/o los archivos Makefile, se debe de instalar los siguientes paquetes:

autoproject(>=0.20) 
autoconf(>=2.61)
autogen(>=1:5.9.3-4)
automake(>=1.10.1)
autotools-dev
libglib2.0-dev(2.16.6)
atool(>=0.29.0)
m4(>=1.4.8)
perl(>=5)
libtool(>=1.5.26)
inttool(>=0.37.1)

Pasos para realizar la construcción del instalador UNIX:

 Paso 1: Bajamos el código fuente de Almidón 
 Opción 1: Desde el repositorio git
 Línea de comandos: 
 Cambiamos al directorio que alojará la carpeta del código fuente de Almidón, puede ser 
 cualquiera que tenga el usuario permisos de lectura y escritura. Por ejemplo, $HOME/Escritorio
 # cd /ruta/del/directorio/que/alojará/la/carpeta/almidon
 # git clone git@git.almidon.org:almidon

 Opción 2: Desde un Sitio Web de descargas del código de Almidón
 a. Desde la página de desarrollo de Almidón git://trac.almidon.org/ 
 Ubicando el puntero del ratón sobre el enlace tree para descargar el archivo comprimido que 
 contiene las últimas modificaciones que se le han hecho al código de Almidóny guardarlo dentro 
 de un directorio del sistema sobre el que tenga el usuario activo los permisos de lectura y 
 escritura.

 b. Desde la página de descarga de Almidón "http://almidon.org/download/"
 Ubicando el puntero del ratón sobre el enlace "almidon-latest.tar.gz" para descargar
 el archivo comprimido y guardarlo dentro de un directorio del sistema sobre el que tenga el 
 usuario activo los permisos de lectura y escritura. 

 Descomprimimos el el archivo comprimido
 # tar -xvzf /ruta/absoluta/hacia/el/archivo/comprimido

 Obtenemos como resultado el directorio "almidon" ubicado en el directorio donde está ubicado
 el archivo comprimido. 
 Por ejemplo:
 Ruta del archivo comprimido: /home/nombre_de_usuario/Escritorio/almidon-lastest.tar.gz
 Ruta del directorio que nos genera la descompresión del archivo comprimido:
  /home/nombre_de_usuario/Escritorio/almidon

 Paso 2: Ingresamos al directorio almidon
 # cd /ruta/hacia/el/directorio/de/almidon

 Paso 3: Copiar sólo el contenido de la carpeta autotools-dev al directorio de almidon 
 # cp -Rf autotools-dev/*.* ./

 Ojo:
 Luego de haber copiado el contenido de la carpeta autotools-dev a almidon, esta carpeta tiene 
 un archivo almidon.anjuta que si lo desea puede abrirlo para crear el instalador en modo 
 gráfico empleando el Entorno de Desarrollo llamado Anjuta, es útil si usted es un 
 desarrollador o tiene nociones básicos sobre cómo emplear este programa en una distribución  
 basada en Linux.

 Paso 4: Eliminamos sólo el contenido de la carpeta autotools-dev
 #rm -Rf autotools-dev/*

 Paso 5: Renombramos del directorio core y el nombre que asumirá es el siguiente: atma_core
 # mv core atma_core 
	    
 Paso 6: Modificamos los archivos *.am sólo si lo deseamos, de lo contrario vayamos al 
 siguiente paso.
 Debe buscar el nombre del archivo o directorio dentro del archivo Makefile.am( que se 
 encuentra dentro del mismo directorio que éstos)que contiene que a su vez posee una macro 
 llamada SUBDIRS y otra llamada con el nombreDelObjetivo(el que lleva esta cadena _DATA), el 
 primero tiene una lista de los nombres de subdirectorios y el segundo de archivos que se 
 encuentran dentro de un directorio.

 Modificación de la lista de subdirectorios y archivos.
 a. Eliminación un archivo o subdirectorio dentro de su respectiva lista
 En consola:
 Abrimos y editamos el archivo Makefile.am, en el caso de haya eliminado un nuevo 
 subdirectorio o archivo debe borrar la línea que contiene el nombre del sudirectorio o 
 archivo y el cáracter /. Y por último, si no está eliminado el archivo o subdirectorio lo 
 borramos de la jerarquía de subdirectorios del directorio almidon.
 Sólo en el caso de la eliminación del subdirectorio debemos editar el archivo configure.ac y
 eliminar la línea que contiene nombre_del_directorio_incluido_de_almidon_por_modificar/nombre_del_subdirectorio_eliminado/Makefile
 
 En Anjuta: Hacemos las intrucciones destinadas a la consola.

 b. Agregación un archivo o subdirectorio dentro de su respectiva lista
 En consola:
 Abrimos y editamos el archivo Makefile.am, en el caso de que haya agregado un nuevo 
 subdirectorio o archivo debe agregar el cáracter '\' al último después del nombre del 
 sudirectorio o archivo que posea la lista hasta el momento y en la siguiente línea escribir 
 el nombre del subdirectorio o archivo agregado.

 Cuando vaya añadir un nuevo subdirectorio a la lista de subdirectorios de un directorio, 
 edité el archivo configure.ac, busque la macro AC_OUTPUT que posee una lista de Makefile a
 crear dentro del árbol jerárquico de subdirectorio de la carpeta almidon, al fina de la 
 lista y antes de '])' introduzca una nueva línea y escriba:  
 nombre_del_directorio_incluido_de_almidon_por_modificar/nombre_del_subdirectorio_añadido/
 Makefile

 En Anjuta: 
 a. Añadir un nuevo subdirectorio a la lista de subdirectorios que posee el directorio a 
 modificar.
 Nos ubicamos en la barra de menú, luego hacemos clic sobre el menú Proyecto,  
 después hacemos clic sobre el menú Agregar grupo, a continuación se nos abrirá una nueva 
 ventana cuyo título es Nuevo Grupo escribimos en el campo el nombre del subdirectorio a 
 añadir y por seleccionamos el directorio(incluido dentro de la carpeta almidon)donde que 
 queremos que este agregado.

 b. Añadir un nuevo archivo a la lista de archivos de cualquier tipo y extensión que posee 
 el directorio a modificar.

    Nos ubicamos en la barra de menú, luego hacemos clic sobre el menú Proyecto,  
    después hacemos clic sobre el menú Añadir archivo fuente, a continuación se nos abrirá una 
    nueva ventana cuyo título es Añadir fuente hacemos clic sobre el botón "Seleccionar un 
    archivo para añadir..." se nos mostrará otra ventana cuyo título es Seleccionar fuentes...
    buscamos y seleccionamos el archivo por añadir y luego en esta ventana presionamos el botón 
    abrir, lo cual hace que sólo se nos muestre sólo la primera ventana donde seleccionamos el  
    directorio(incluido dentro de la carpeta almidon)donde que queremos que este agregado.

    
    Por ejemplo:
    Directorio:  /ruta/hacia/almidon/demo
    Makefile.am: /ruta/hacia/almidon/demo/Makefile.am

    Subdirectorio:
    Lista de subdirectorios antes de añadir o eliminar el nuevo directorio: 
    SUBDIRS = \
	     cache\
	     classes \
	     files \
	     logs \
	     misc \
	     public_html \
	     secure  \
	     templates \
	     templates_c
  
    Luego de añadir el nuevo directorio:           luego de eliminar el directorio templates_c:
    SUBDIRS = \        				   SUBDIRS = \
	     cache\ 					     cache\
	     classes \					     classes \
	     files \					     files \
	     logs \					     logs \
	     misc \					     misc \
	     public_html \				     public_html \
	     secure  \					     secure  \
	     templates \				     templates 
	     templates_c \				     
             nombre_del_subdirectorio_agregado 
                     
    Archivo:
    Lista de subdirectorios antes de añadir o eliminar el nuevo archivo:
    almidon_demo_DATA =  \
    almidon \
    antidemo.mysql \
    antidemo.sql \
    country.sql \
    create.sql \
    demo.almidon.conf \
    demo.mysql \
    demo.sql \ 
    .htpasswd

    Luego de añadir el nuevo archivo:           luego de eliminar el archivo .htpasswd:
    almidon_demo_DATA =  \			almidon_demo_DATA =  \
    almidon \					almidon \
    antidemo.mysql \				antidemo.mysql \
    antidemo.sql \				antidemo.sql \
    country.sql \				country.sql \
    create.sql \				create.sql \
    demo.almidon.conf \				demo.almidon.conf \
    demo.mysql \				demo.mysql \
    demo.sql \					demo.sql \	  
    .htpasswd \					
    nombre_del_subdirectorio_agregado 


 Paso 7: Introducimos la versión del instalador UNIX del código de Almidon sólo si deseamos
 cambiar la que está por defecto.
 Abrimos el archivo llamado configure.ac, luego buscamos y editamos la línea que contiene la
 macro AC_INIT. 
 Por defecto, la macro contiene como nombre del paquete o instalador precisamente el valor de
 "almidon", mientras que el de la versión corresponde a 0.7.1. En otras palabras está  
 estructurado así:

 AC_INIT(almidon,0.7.1) 
 AC_INIT(paquete,versión,[informe de errores],[tarname],[url])   
 Los argumentos de la macro AC_INIT que se encuentran entre los signos de llaves([]) son 
 opcionales.

 Paso 8: Actualiza los cambios hechos a los archivos con extensión *.ac y *.am para adaptarlos
 los archivos que se generarán, los cuales son necesarios para construir el instalador UNIX. 
 Uno de ellos es el configure. 

 Nota: Los archivos con extensión *.am contiene el listado de los archivos y directorios de cada
 directorio encontrado dentro del directorio llamado almidon. Además, tienen la pecularidad de 
 que podemos indicar en que queremos se almacena el contenido de cada directorio cuando vayamos
 a instalar. 
 SUBDIRS contiene el listado de los subdirectorios contenido dentro de un directorio
 donde se encuentra almacenado el archivo con extensión *.am.

 nombreDelObjetivo_DATA contiene el listado de los nombres de los archivos de cualquier tipo y 
 extensión que contendrá el directorio destino de instalación, cuya ruta absoluta lo 
 almacenará nombreDelObjetivodir.

 nombreDelObjetivodir contiene la ruta absoluta del directorio donde se almacenará los archivos 
 que almacena nombreDelObjetivo_DATA una vez instalados.
 En la consola: # ./autogen.sh
 En Anjuta: Nos ubicamos en la barra de Menú y hacemos clic sobre el menú Construir y luego en 
 el submenú Ejecutar autogeneración...

 Paso 9: Ejecutamos el script configure sólo si no deseamos usar de nuevo autogen.sh(por que 
 invoca automáticamente al script configure ) y como y como resultado generamos los archivos 
 necesarios para construir el instalador, entre ellos están los Makefile.   
 En la consola: # ./configure
 En Anjuta: Nos ubicamos en la barra de Menú y hacemos clic sobre el menú Construir y luego en 
 el submenú Ejecutar configure...
 
 Paso 10: Compilamos los archivos Makefile.
 En la consola: # make
 En Anjuta: Haciendo clic sobre el menú Construir y luego en el submenú Construir proyecto

 Paso 11: Creamos el archivo comprimido del instalador en formato tarball, cuyo nombre incluye 
 el nombre del paquete y la versión del mismo, éste incluye los directorios y archivos  
 necesarios para compilar y/o instalar el código fuente de Almidon  

 En la consola: # make dist 
 En Anjuta:  Nos ubicamos en la barra de Menú y hacemos clic sobre el menú Construir, luego en 
 el submenú Construir tarball y por último cerramos el proyecto abierto con anterioridad de 
 Anjuta asociado al archivo almidon/almidon.anjuta.

 Nos generará el archivo comprimido del instalador en formato tarball con este nombre:
 almidon-version.tar.gz
 
 La ruta absoluta del archivo comprimido es la siguiente:
 /ruta/hacia/el/directorio/de/almidon/almidon-version.tar.gz

 Paso 12: Si queremos cambiar nuevamente el contenido de los archivos con extensión *.ac, *.am 
 o *.in volvemos al paso 3, de lo contrario ejecutamos las siguientes intrucciones:
 
 Renombramos el directorio atma_core a su nombre original que sería core. 
 #mv atma_core core

 Actualizamos el contenido del directorio autotools-dev de inmediato, ya sea si hemos cambiado 
 el contenido o no de los archivos con extensión *.ac, *.am o *.in copiado previamente a la 
 carpeta almidon, ya que este paso es necesario para futuras contrucciones de versiones del 
 instalador de almidon. Así:
 #chmod +x update_autotools-devdir.sh (Sólo es necesario si no tiene permisos de ejecución.)
 #./update_autotools-devdir.sh

 Paso 13: Descomprimimos el archivo comprimido del instalador en formato tarball.
 tar -xvzf /ruta/hacia/el/archivo/comprimido/en/formato/tarball/llamado/almidon-version.tar.gz

 Paso 14: Cambiamos el directorio que nos genera la descompresión del archivo comprimido del 
 instalador en formato tarball.
 # cd /ruta/hacia/el/directorio/que/genera/el/archivo/comprimido/en/formato/llamado/almidon-version

 Paso 15:  Si no deseamos crear el paquete *.deb o *.rpm y deseamos instalar el contenido del 
 directorio almidon-version en la computadora sin ayuda de la construcción de estos paquetes.
 Como root:
 En terminal: #make install
 En Anjuta: 
 Abrimos el archivo almidon-version/almidon.anjuta para abrir el proyecto con ayuda del programa
 Anjuta. Nos ubicamos en la barra de Menú y hacemos clic sobre el menú Construir y luego en el submenú Instalar proyecto.



