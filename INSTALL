REQUERIMIENTOS
==============

ver README

INSTALAR
========

La version actual en desarrollo es la 0.4, y está disponible via SVN:

  $ cd /var/www
  $ svn checkout http://svn.almidon.org/trunk/ almidon

O en un .tar.gz desde http://almidon.org/download/

  $ cd /var/www
  $ wget http://almidon.org/download/almidon-latest.tar.gz
  $ tar -xvzf almidon-latest.tar.gz

CONFIGURANDO APACHE
===================

Dentro del directorio "almidon" está el directorio pub que debe mapearse como /cms
en Apache, y el directorio demo/public_html que debe ser el DocumentRoot.
Un ejemplo de configuracion de Apache:

  NameVirtualHost 127.0.0.1:80
  <VirtualHost 127.0.0.1:80>
        ServerName local.almidon.org
        DocumentRoot /var/www/almidon/demo/public_html
        Alias /cms /var/www/almidon/pub
        <Directory /var/www/almidon>
                Options +FollowSymLinks +MultiViews
        </Directory>
  </VirtualHost>

Nota, el demo de almidon usa mod_rewrite, este modulo debe estar activo.
Nota, local.almidon.org de apuntar a 127.0.0.1

Permisos del demo: 'templates_c', 'logs', 'cache' debe ser escribible por el usuario web.
Igual 'files' y sus subcarpertas.

  $ cd demo
  $ chmod -R o+w templates_c logs cache files

CONFIGRANDO POSTGRESQL
======================

Esto depende mucho de como has configurado seguridad en PostrgreSQL, pero en breve
usando un usuario autorizado a crear bases de datos:

  $ su - postgres
  $ psql -f /var/www/almidon/demo/demo.sql

Para implementar el uso de usuarios y roles, ahora indispensable:

  $ psql -f /var/www/almidon/demo/users.sql

Adicionalmente, una entrada en la configuración de postgres, pg_hba.conf puede ser
necesaria, para permitir acceso local usando password:

# TYPE  DATABASE    USER        CIDR-ADDRESS          METHOD
local   all         all                               md5

Nota: el script sql elige los password secreto1 y secreto2 para sus usuarios
Nota: si es la segunda vez que instalas el demo, asegurate de borrar la base
de datos almidondemo y usuarios almidondemo y almidondemowww

CONFIGURANDO ALMIDON
====================

config.php en almidon/demo/classes/config.php
define las variable (o constantes) principales como:

  if (!defined('ADMIN')) define('ADMIN', false);
  if (ADMIN===true) define ('DSN', 'pgsql://almidondemo:pass@/almidondemo');
  else define ('DSN', 'pgsql://almidondemowww:pass@/almidondemo');
  define ('DEBUG', true);
  define ('ROOTDIR', '/var/www');
  define ('DOMAIN', 'example.org');
  define ('ALMIDONDIR', '/usr/local/almidon/');

DSN es el valor para acceder a la base de datos, cambiar "pass" por cada
password elegido para cada usuario, almidondemo y almidondemowww.
Nota, no es necesario usar doble usuario, puede especificarse el mismo.
Nota 2, ADMIN es unicamente 'true' desde la administración.

DEBUG activa el log de SQL y otros mensajes de error
ROOTDIR el directorio un nivel superio a DocumentRoot, donde esta classes, templates, etc.
DOMAIN el nombre del dominio, varios usos por almidon.
ALMIDONDIR donde se encuentra almidon.

Nota: el demo de almidon viene ya configurado con los passwords y variables necesarias.

PRUEBA
=======

http://local.almidon.org/

Nota: si la prueba es desde una máquina sin conexión a Internet, debes
mapear local.almidon.org a 127.0.0.1 en /etc/hosts con la siguiente linea:

127.0.0.1 local.almidon.org

SOPORTE TECNICO
===============

ver README
